@let products = vm.products();

@if (products.length > 0) {
    <kirby-list [items]="products" (itemSelect)="vm.selectProduct($event)">
        <kirby-item *kirbyListItemTemplate="let product" [selectable]="product.state.status !== 'creating'" disclosure="arrow-more">
            <kirby-label>
                <p class="kirby-item-title">{{ product.name }}</p>
                <p class="kirby-item-subtitle">{{ product.id }}</p>
            </kirby-label>
            @switch (product.state.status) {
                @case ('creating') {
                    <kirby-spinner slot="end"></kirby-spinner>
                }
                @case ('created') {
                    <kirby-badge slot="end" themeColor="success">
                        <kirby-icon name="checkmark-selected"></kirby-icon>
                    </kirby-badge>
                }
                @case ('error') {
                    <kirby-badge slot="end" themeColor="danger">
                        <kirby-icon name="warning"></kirby-icon>
                    </kirby-badge>
                }
            }
        </kirby-item>
    </kirby-list>
} @else {
    <p>No products found</p>
}