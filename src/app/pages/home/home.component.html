<kirby-page>
    <kirby-header title="Atlas Economic Tool" subtitle1="Invoice Management">
        <kirby-action-group *kirbyHeaderActions>
            <button kirby-button (click)="vm.loadInvoices()">
                <kirby-icon name="upload"></kirby-icon>
                <span class="text">Load Invoices</span>
            </button>
            <button kirby-button attentionLevel="3" (click)="vm.openSettings()">
                <kirby-icon name="cog"></kirby-icon>
                <span class="text">Settings</span>
            </button>
        </kirby-action-group>
    </kirby-header>
    <kirby-page-content>
        <kirby-loading-overlay [isLoading]="vm.isLoading()">
            @let invoices = vm.invoices();
            @let invoiceError = vm.invoiceError();
            @if (invoices !== undefined) {
                <atlas-invoice-list [invoices]="invoices" (invoiceSelected)="vm.viewInvoice($event)"></atlas-invoice-list>
            } @else if (invoiceError) {
                <kirby-empty-state
                    title="Loading Invoices Failed"
                    subtitle="An error occurred while loading invoices."
                    iconName="warning"
                    themeColor="danger"
                >{{ invoiceError }}</kirby-empty-state>
            } @else {
                <kirby-empty-state
                    title="No Invoices Loaded"
                    subtitle="Load some invoices to get started."
                    iconName="help"
                >
                    <button kirby-button (click)="vm.loadInvoices()">
                        <kirby-icon name="upload"></kirby-icon>
                        <span class="text">Load Invoices</span>
                    </button>
                </kirby-empty-state>
            }
        </kirby-loading-overlay>
    </kirby-page-content>
</kirby-page>