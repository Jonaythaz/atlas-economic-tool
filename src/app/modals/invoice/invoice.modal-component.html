<kirby-page-title>Invoice {{ vm.invoice.id }}</kirby-page-title>

<kirby-section-header>
    <h3 heading>Invoice Details</h3>
</kirby-section-header>
<kirby-card [hasPadding]="true">
    <kirby-card-header [title]="vm.errorMessage ?? ''" [flagged]="vm.errorMessage ? 'danger' : null"></kirby-card-header>

    <kirby-item>
        <p class="kirby-item-title">ID</p>
        <data slot="end">{{ vm.invoice.id }}</data>
    </kirby-item>
    <kirby-item>
        <p class="kirby-item-title">Date</p>
        <data slot="end">{{ vm.invoice.date }}</data>
    </kirby-item>
    <kirby-item>
        <p class="kirby-item-title">Damage number</p>
        <data slot="end">{{ vm.invoice.damageNumber ?? 'None' }}</data>
    </kirby-item>
    <kirby-item>
        <p class="kirby-item-title">Customer</p>
        <data slot="end">{{ vm.invoice.customer.name }}</data>
    </kirby-item>
    <kirby-item>
        <p class="kirby-item-title">Recipient</p>
        <data slot="end">{{ vm.invoice.recipient }}</data>
    </kirby-item>
</kirby-card>

<br/>

<kirby-section-header>
    <h3 heading>Invoice Lines</h3>
</kirby-section-header>
<kirby-card>
    <kirby-accordion>
        @for (line of vm.invoice.lines; track $index) {
            <kirby-accordion-item [title]="($index + 1) + '. ' + line.product.name">
                <kirby-item>
                    <p class="kirby-item-title">Product ID</p>
                    <data slot="end">{{ line.product.id }}</data>
                </kirby-item>
                <kirby-item>
                    <p class="kirby-item-title">Product Name</p>
                    <data slot="end">{{ line.product.name }}</data>
                </kirby-item>
                <kirby-item>
                    <p class="kirby-item-title">Price</p>
                    <data slot="end">{{ line.price }}DKK</data>
                </kirby-item>
                <kirby-item>
                    <p class="kirby-item-title">Quantity</p>
                    <data slot="end">{{ line.quantity }}</data>
                </kirby-item>
            </kirby-accordion-item>
        }
    </kirby-accordion>
</kirby-card>